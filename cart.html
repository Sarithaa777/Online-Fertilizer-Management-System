<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link rel="stylesheet" href="styles.css">
    <script src="cart.js" defer></script>
</head>
<body>
    <div class="cart-container">
        <h2>Product Details</h2>
        <div class="product-details">
            <p><strong>Product Name:</strong> <span id="product-name"></span></p>
            <p><strong>Price:</strong> â‚¹<span id="product-price"></span></p>
            <p><strong>Expiry Date:</strong> <span id="product-expiry"></span></p>
            <p><strong>Company:</strong> <span id="product-company"></span></p>
            <p><strong>Description:</strong> <span id="product-description"></span></p>
            <p><strong>Components:</strong> <span id="product-components"></span></p>
            <p><strong>How It Works:</strong> <span id="product-howItWorks"></span></p>
            <P><strong>Note:</strong> <span>Disclaimer: We are not responsible for any misuse, consumption,
                 or improper use of the product after purchase. Please use it as intended and follow all safety guidelines.</span></P>
        </div>

        <h2>Enter Shipping Details</h2>
<form action="/cartData" method="POST">
    <label for="name">Full Name:</label>
    <input type="text" id="name" name="name" required>

    <label for="address">Address:</label>
    <textarea id="address" name="address" required></textarea>

    <label for="pincode">Pincode:</label>
    <input type="text" id="pincode" name="pincode" pattern="[0-9]{6}" title="Enter a valid 6-digit pincode" required>

    <label for="phone">Phone Number:</label>
    <input type="text" id="phone" name="phone" pattern="[0-9]{10}" title="Enter a valid 10-digit phone number" required>

    <label for="payment">Payment Method:</label>
    <select id="payment" name="payment">
        <option value="">select</option>
        <option value="cod">Cash on Delivery</option>
    </select>

    
    <div class="disclaimer">
        <p><strong>Disclaimer:</strong> Please ensure the provided details are correct. Once the order is placed, modifications might not be possible.</p>
    </div>




     <button type="submit">Place Order</button>
        </form>
    </div>
    <script>
        document.querySelector("form").addEventListener("submit", async function(event) {
            event.preventDefault(); // Prevent page refresh
        
            let formData = {
                name: document.getElementById("name").value.trim(),
                address: document.getElementById("address").value.trim(),
                pincode: document.getElementById("pincode").value.trim(),
                phone: document.getElementById("phone").value.trim(),
                payment: document.getElementById("payment").value
            };
        
            try {
                let response = await fetch("/cartData", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(formData)
                });
        
                let result = await response.json();
                if (response.ok) {
                    alert("Order placed successfully!");
                    document.querySelector("form").reset();
                } else {
                    alert("Failed to place order: " + result.error);
                }
            } catch (error) {
                alert("Error: " + error.message);
            }
        });
        </script>
        
</body>
</html>
